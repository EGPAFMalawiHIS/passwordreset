<div class="container mx-auto px-4 py-6">
  <h1 class="text-3xl font-medium text-teal-700 mb-8">Transaction Reports</h1>
  
  <!-- Filter Transactions -->
  <div class="bg-white rounded-lg shadow p-6 mb-8">
    <h2 class="text-xl font-semibold mb-2">Filter Transactions</h2>
    <p class="text-gray-600 mb-6">Select criteria to filter transactions for your report</p>
    
    <%= form_with url: reports_path, method: :get, class: "space-y-6" do |form| %>
      <input type="hidden" name="filter" id="filter-input" value="">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div>
          <%= form.label :start_date, "Start Date", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <div class="relative">
            <%= form.text_field :start_date, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500", placeholder: "dd/mm/yyyy" %>
            <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
            </div>
          </div>
        </div>
        
        <div>
          <%= form.label :end_date, "End Date", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <div class="relative">
            <%= form.text_field :end_date, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500", placeholder: "dd/mm/yyyy" %>
            <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
            </div>
          </div>
        </div>
        
        <div>
          <%= form.label :status, "Status", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= form.select :status, [["All Statuses", ""], ["Active", "active"], ["Used", "used"], ["Expired", "expired"]], {}, { class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500" } %>
        </div>
      </div>
      
      <div class="flex justify-end">
        <button type="submit" class="flex items-center py-2 px-4 bg-teal-600 hover:bg-teal-700 text-white rounded-md font-medium transition duration-200">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
          </svg>
          Filter Transactions
        </button>
      </div>
    <% end %>
  </div>
  
  <!-- Predefined Reports -->
  <div class="bg-white rounded-lg shadow p-6 mb-8">
    <h2 class="text-xl font-semibold mb-2">Predefined Reports</h2>
    <p class="text-gray-600 mb-6">Common report templates for quick access</p>
    
    <div class="mb-6">
      <div class="flex flex-wrap border-b predefined-reports">
        <button data-filter="today" class="report-filter px-6 py-2 bg-gray-100 text-gray-800 font-medium border-b-2 border-teal-600">Today</button>
        <button data-filter="this_week" class="report-filter px-6 py-2 text-gray-600 hover:text-gray-800 font-medium">This Week</button>
        <button data-filter="this_month" class="report-filter px-6 py-2 text-gray-600 hover:text-gray-800 font-medium">This Month</button>
        <button data-filter="active_only" class="report-filter px-6 py-2 text-gray-600 hover:text-gray-800 font-medium">Active Only</button>
      </div>
    </div>
    
    <div class="flex justify-between items-center">
      <p class="text-gray-600">Download a report of all currently active transactions.</p>
      
      <div class="flex space-x-2">
        <button class="flex items-center px-3 py-1 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
          CSV
        </button>
        
        <button class="flex items-center px-3 py-1 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
          </svg>
          PDF
        </button>
        
        <button class="flex items-center px-3 py-1 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
          Excel
        </button>
      </div>
    </div>
  </div>
  
  <!-- Transaction Results Table (would be populated based on filter) -->
  <div class="bg-white rounded-lg shadow overflow-hidden">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Transaction ID</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">User</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Created</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Expires</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        <!-- Sample data for display -->
        <tr>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">TX-1234</td>
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="text-sm font-medium text-gray-900">John Smith</div>
            <div class="text-sm text-gray-500">@jsmith</div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">6/15/2023, 12:30:00 PM</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">6/16/2023, 12:30:00 PM</td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
              Active
            </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <button class="text-gray-500 hover:text-gray-700">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z" />
              </svg>
            </button>
          </td>
        </tr>
        <tr>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">TX-1235</td>
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="text-sm font-medium text-gray-900">Mary Johnson</div>
            <div class="text-sm text-gray-500">@mjohnson</div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">6/15/2023, 11:15:00 AM</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">6/16/2023, 11:15:00 AM</td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
              Active
            </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <button class="text-gray-500 hover:text-gray-700">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z" />
              </svg>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const reportFilters = document.querySelectorAll('.report-filter');
      const form = document.querySelector('form');
      const startDateInput = form.querySelector('input[name="start_date"]');
      const endDateInput = form.querySelector('input[name="end_date"]');
      const statusInput = form.querySelector('select[name="status"]');
      const filterInput = form.querySelector('input[name="filter"]');

      reportFilters.forEach(button => {
        button.addEventListener('click', function() {
          // Remove active styles from all buttons
          reportFilters.forEach(btn => {
            btn.classList.remove('bg-gray-100', 'text-gray-800', 'border-b-2', 'border-teal-600');
            btn.classList.add('text-gray-600', 'hover:text-gray-800');
          });

          // Add active styles to clicked button
          this.classList.remove('text-gray-600', 'hover:text-gray-800');
          this.classList.add('bg-gray-100', 'text-gray-800', 'border-b-2', 'border-teal-600');

          // Set filter based on data attribute
          const filter = this.getAttribute('data-filter');
          const today = new Date();
          const startOfDay = new Date(today.getFullYear(), today.getMonth(), today.getDate());
          const startOfWeek = new Date(today.setDate(today.getDate() - today.getDay()));
          const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);

          switch(filter) {
            case 'today':
              startDateInput.value = startOfDay.toLocaleDateString('en-GB');
              endDateInput.value = new Date().toLocaleDateString('en-GB');
              statusInput.value = '';
              filterInput.value = 'today';
              break;
            case 'this_week':
              startDateInput.value = startOfWeek.toLocaleDateString('en-GB');
              endDateInput.value = new Date().toLocaleDateString('en-GB');
              statusInput.value = '';
              filterInput.value = 'this_week';
              break;
            case 'this_month':
              startDateInput.value = startOfMonth.toLocaleDateString('en-GB');
              endDateInput.value = new Date().toLocaleDateString('en-GB');
              statusInput.value = '';
              filterInput.value = 'this_month';
              break;
            case 'active_only':
              startDateInput.value = '';
              endDateInput.value = '';
              statusInput.value = 'active';
              filterInput.value = 'active_only';
              break;
          }

          // Submit the form
          form.submit();
        });
      });
    });
  </script>
</div>